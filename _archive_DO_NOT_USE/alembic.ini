# alembic.ini
# Alembic 的主配置文件。
# 它定义了 Alembic 的行为，包括数据库连接、迁移脚本位置等。

[alembic]
# 指向迁移脚本的目录。
script_location = alembic

# 迁移文件的命名模板。
file_template = %%(rev)s_%%(slug)s

# PostgreSQL 需要这个选项来正确处理类型定义的迁移。
# 例如，ENUM 类型的变更。
compare_type = true

# [核心配置]
# 让 Alembic 从环境变量 TH_DATABASE_URL 读取数据库连接字符串。
# 这与我们的 TransHubConfig 保持一致，实现了配置的统一管理。
sqlalchemy.url = ${TH_DATABASE_URL}


[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %%(levelname)-5.5s [%%(name)s] %%(message)s
datefmt = %%H:%%M:%%S