# ==============================================================================
#  Trans-Hub 示例配置文件 (.env.example) - v3.0.0 对齐版
# ==============================================================================
#
# 使用说明：
# 1) 将此文件复制为 .env，然后按需修改。
# 2) 变量前缀统一为 TRANSHUB_，嵌套字段用双下划线 "__" 表示层级。
# 3) 生产环境强烈建议使用 PostgreSQL。Redis/队列/OTEL 均为可选增强。
#
# ==============================================================================


# ------------------------------------------------------------------------------
#  核心配置 (Core)
# ------------------------------------------------------------------------------
# 默认源语言（BCP-47，如 en、zh-Hans、ja）
TRANSHUB_DEFAULT_SOURCE_LANG="en"

# 默认翻译引擎：debug | translators | openai
TRANSHUB_ACTIVE_ENGINE="debug"

# 每次批处理的最大条数
TRANSHUB_BATCH_SIZE=50

# 垃圾回收保留天数（删除长期未访问的源/缓存痕迹）
TRANSHUB_GC_RETENTION_DAYS=90


# ------------------------------------------------------------------------------
#  数据库 (Database)
# ------------------------------------------------------------------------------
# [运行库] 必须使用异步驱动。三选一（开发建议 SQLite，生产建议 PostgreSQL）。
# SQLite（零配置）
TRANSHUB_DATABASE__URL="sqlite+aiosqlite:///transhub.db"
# PostgreSQL（示例）
#TRANSHUB_DATABASE__URL="postgresql+asyncpg://user:password@localhost:5432/transhub"
# MySQL（示例）
#TRANSHUB_DATABASE__URL="mysql+aiomysql://user:password@localhost:3306/transhub"

# SQLAlchemy echo（调试开关）
TRANSHUB_DATABASE__ECHO=false

# [维护库] 仅用于 Alembic/工具，必须使用同步驱动。
# 若主库为 PostgreSQL 且此项留空，程序可自动推导为 psycopg2 + 'postgres' 库。
#TRANSHUB_MAINTENANCE_DATABASE_URL="postgresql+psycopg2://admin:password@localhost:5432/postgres"


# ------------------------------------------------------------------------------
#  Redis 缓存与分布式控制 (可选增强)
# ------------------------------------------------------------------------------
# Redis 连接 URL（未设置即不启用 Redis 相关功能）
#TRANSHUB_REDIS__URL="redis://localhost:6379/0"

# 统一 key 前缀（用于区分不同环境，如 th:dev:, th:staging:)
TRANSHUB_REDIS__KEY_PREFIX="th:dev:"

# 缓存策略
TRANSHUB_REDIS__CACHE__TTL=3600
TRANSHUB_REDIS__CACHE__MAXSIZE=1000


# ------------------------------------------------------------------------------
#  队列与事件流 (Queue & Streams · 可选增强)
# ------------------------------------------------------------------------------
# 队列类型：redis | db（不启用 Redis 时可选 db 以基于数据库轮询）
TRANSHUB_QUEUE__KIND="db"

# Worker / 事件流名称与轮询间隔
TRANSHUB_WORKER__EVENT_STREAM_NAME="th_events"
TRANSHUB_WORKER__POLL_INTERVAL=2.0


# ------------------------------------------------------------------------------
#  重试策略 (Retry Policy)
# ------------------------------------------------------------------------------
TRANSHUB_RETRY_POLICY__MAX_ATTEMPTS=2
TRANSHUB_RETRY_POLICY__INITIAL_BACKOFF=1.0
TRANSHUB_RETRY_POLICY__MAX_BACKOFF=60.0


# ------------------------------------------------------------------------------
#  日志与可观测性 (Logging & Observability)
# ------------------------------------------------------------------------------
TRANSHUB_LOGGING__LEVEL="INFO"       # DEBUG | INFO | WARNING | ERROR
TRANSHUB_LOGGING__FORMAT="console"   # console（开发）| json（生产）

# 可选：OpenTelemetry / 指标导出（预留占位）
#TRANSHUB_OBSERVABILITY__OTEL_EXPORTER="prometheus"


# ------------------------------------------------------------------------------
#  引擎配置 (Engines)
# ------------------------------------------------------------------------------

# --- OpenAI 引擎（当 TRANSHUB_ACTIVE_ENGINE=openai 时启用） ---
#TRANSHUB_OPENAI__API_KEY="sk-your-secret-key-here"
#TRANSHUB_OPENAI__BASE_URL="https://api.openai.com/v1"
#TRANSHUB_OPENAI__MODEL="gpt-4o"
#TRANSHUB_OPENAI__TEMPERATURE=0.1
#TRANSHUB_OPENAI__TIMEOUT=60
#TRANSHUB_OPENAI__CONNECT_TIMEOUT=5
#TRANSHUB_OPENAI__MAX_RETRIES=2

# --- Translators 引擎 ---
#TRANSHUB_TRANSLATORS__PROVIDER="google"

# --- Debug 引擎 ---
#TRANSHUB_DEBUG_ENGINE__MODE="SUCCESS"
#TRANSHUB_DEBUG_ENGINE__FAIL_ON_TEXT="fail me"
#TRANSHUB_DEBUG_ENGINE__FAIL_IS_RETRYABLE=true


# ------------------------------------------------------------------------------
#  服务器通用 (Server Common · 预留)
# ------------------------------------------------------------------------------
#TRANSHUB_DEBUG=true
#TRANSHUB_HOST="0.0.0.0"
#TRANSHUB_PORT=8000